<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Data Science - 5&nbsp; Data Import/Export</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./communication.html" rel="next">
<link href="./python.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./import.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Import/Export</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/ids-s24.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Data Science</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preliminaries</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Project Management</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reproducibile Data Science</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Python Refreshment</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./import.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Import/Export</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Communication and Ethics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statsmod.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Statistical Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./supervised.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Supervised Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Advanced Topics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Exercises</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#using-the-pandas-package" id="toc-using-the-pandas-package" class="nav-link active" data-scroll-target="#using-the-pandas-package"><span class="header-section-number">5.1</span> Using the <code>Pandas</code> Package</a></li>
  <li><a href="#filling-missing-values" id="toc-filling-missing-values" class="nav-link" data-scroll-target="#filling-missing-values"><span class="header-section-number">5.2</span> Filling Missing Values</a></li>
  <li><a href="#using-appache-arrow-library" id="toc-using-appache-arrow-library" class="nav-link" data-scroll-target="#using-appache-arrow-library"><span class="header-section-number">5.3</span> Using Appache <code>Arrow</code> Library</a></li>
  <li><a href="#accessing-the-census-data-with-uszipcode" id="toc-accessing-the-census-data-with-uszipcode" class="nav-link" data-scroll-target="#accessing-the-census-data-with-uszipcode"><span class="header-section-number">5.4</span> Accessing the Census Data with <code>uszipcode</code></a></li>
  <li><a href="#accessing-acs-data" id="toc-accessing-acs-data" class="nav-link" data-scroll-target="#accessing-acs-data"><span class="header-section-number">5.5</span> Accessing ACS Data</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">5.5.1</span> Introduction</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation"><span class="header-section-number">5.5.2</span> Installation</a></li>
  <li><a href="#accessing-acs-data-1" id="toc-accessing-acs-data-1" class="nav-link" data-scroll-target="#accessing-acs-data-1"><span class="header-section-number">5.5.3</span> Accessing ACS Data</a></li>
  <li><a href="#visualizing" id="toc-visualizing" class="nav-link" data-scroll-target="#visualizing"><span class="header-section-number">5.5.4</span> Visualizing</a></li>
  <li><a href="#further-analysis" id="toc-further-analysis" class="nav-link" data-scroll-target="#further-analysis"><span class="header-section-number">5.5.5</span> Further Analysis</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">5.5.6</span> References</a></li>
  </ul></li>
  <li><a href="#database-operations-with-sql" id="toc-database-operations-with-sql" class="nav-link" data-scroll-target="#database-operations-with-sql"><span class="header-section-number">5.6</span> Database Operations with SQL</a>
  <ul class="collapse">
  <li><a href="#introduction-1" id="toc-introduction-1" class="nav-link" data-scroll-target="#introduction-1"><span class="header-section-number">5.6.1</span> Introduction</a></li>
  <li><a href="#what-is-sql" id="toc-what-is-sql" class="nav-link" data-scroll-target="#what-is-sql"><span class="header-section-number">5.6.2</span> What is SQL?</a></li>
  <li><a href="#recap-and-overview-of-some-basics" id="toc-recap-and-overview-of-some-basics" class="nav-link" data-scroll-target="#recap-and-overview-of-some-basics"><span class="header-section-number">5.6.3</span> Recap and Overview of some Basics</a></li>
  <li><a href="#utilizing-sqlite3-in-python-with-rodent-data-set" id="toc-utilizing-sqlite3-in-python-with-rodent-data-set" class="nav-link" data-scroll-target="#utilizing-sqlite3-in-python-with-rodent-data-set"><span class="header-section-number">5.6.4</span> Utilizing sqlite3 in Python with Rodent Data Set</a></li>
  <li><a href="#references-1" id="toc-references-1" class="nav-link" data-scroll-target="#references-1"><span class="header-section-number">5.6.5</span> References</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Import/Export</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Working with data is a fundamental aspect of data science in Python, with data import and export being crucial skills. Throughout, we will use the 311 service request data for illustrations, downloaded from the NYC Open Data as a <code>csv</code> file.</p>
<section id="using-the-pandas-package" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="using-the-pandas-package"><span class="header-section-number">5.1</span> Using the <code>Pandas</code> Package</h2>
<p>The pandas library simplifies data manipulation and analysis. It’s especially handy for dealing with CSV files.</p>
<div id="f9d88008" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the file name</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>csvnm <span class="op">=</span> <span class="st">"data/rodent_2022-2023.csv"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the strings that indicate missing values</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Q: How would you know these?</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>na_values <span class="op">=</span> [</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">""</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"0 Unspecified"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"N/A"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"na"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"na na"</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Unspecified"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"UNKNOWN"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> custom_date_parser(x):</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.to_datetime(x, <span class="bu">format</span><span class="op">=</span><span class="st">"%m/</span><span class="sc">%d</span><span class="st">/%Y %I:%M:%S %p"</span>, errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the CSV file</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    csvnm,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    na_values <span class="op">=</span> na_values,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    parse_dates <span class="op">=</span> [<span class="st">'Created Date'</span>, <span class="st">'Closed Date'</span>], </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    date_parser <span class="op">=</span> custom_date_parser,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    dtype <span class="op">=</span> {<span class="st">'Latitude'</span>: <span class="st">'float32'</span>, <span class="st">'Longitude'</span>: <span class="st">'float32'</span>},</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Strip leading and trailing whitespace from the column names</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> df.columns.<span class="bu">str</span>.strip()</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> df.columns.<span class="bu">str</span>.replace(<span class="st">' '</span>, <span class="st">'_'</span>, regex <span class="op">=</span> <span class="va">False</span>).<span class="bu">str</span>.lower()</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the 'Location' since it is redundant</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="co"># df.drop(columns=['Location'], inplace=True)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/cq/5ysgnwfn7c3g0h46xyzvpj800000gn/T/ipykernel_27231/754040398.py:22: FutureWarning:

The argument 'date_parser' is deprecated and will be removed in a future version. Please use 'date_format' instead, or read your data in as 'object' dtype and then call 'to_datetime'.
</code></pre>
</div>
</div>
<p>The <code>pandas</code> package also provides some utility functions for quick summaries about the data frame.</p>
<div id="ed5fdc32" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df.shape</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df.describe()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>df.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>unique_key                            0
created_date                          0
closed_date                        2787
agency                                0
agency_name                           0
complaint_type                        0
descriptor                            0
location_type                         0
incident_zip                          0
incident_address                      0
street_name                           0
cross_street_1                       90
cross_street_2                       55
intersection_street_1               104
intersection_street_2                69
address_type                          0
city                               1384
landmark                           3820
facility_type                     82869
status                                2
due_date                          82869
resolution_description             2787
resolution_action_updated_date     2787
community_board                       8
bbl                                2914
borough                               8
x_coordinate_(state_plane)          520
y_coordinate_(state_plane)          520
open_data_channel_type                0
park_facility_name                82869
park_borough                          8
vehicle_type                      82869
taxi_company_borough              82869
taxi_pick_up_location             82869
bridge_highway_name               82869
bridge_highway_direction          82869
road_ramp                         82869
bridge_highway_segment            82869
latitude                            520
longitude                           520
location                            520
zip_codes                           622
community_districts                 526
borough_boundaries                  526
city_council_districts              526
police_precincts                    526
police_precinct                     526
dtype: int64</code></pre>
</div>
</div>
<p>What are the unique values of <code>descriptor</code>?</p>
<div id="6fa6ebfd" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df.descriptor.unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>array(['Rat Sighting', 'Mouse Sighting', 'Condition Attracting Rodents',
       'Signs of Rodents', 'Rodent Bite - PCS Only'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="filling-missing-values" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="filling-missing-values"><span class="header-section-number">5.2</span> Filling Missing Values</h2>
<p>If geocodes are available but zip code is missing, we can use reverse geocoding to fill the zip code. This process involves querying a geocoding service with latitude and longitude to get the corresponding address details, including the ZIP code. This can be done with package <code>geopy</code>, which needs to be installed first: <code>pip install geopy</code>.</p>
<div id="f32f996c" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geopy.geocoders <span class="im">import</span> Nominatim</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geopy.exc <span class="im">import</span> GeocoderTimedOut, GeocoderServiceError</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the geocoder</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>geolocator <span class="op">=</span> Nominatim(user_agent<span class="op">=</span><span class="st">"geoapiExercises"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Function for reverse geocoding</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> reverse_geocode(lat, lon):</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        location <span class="op">=</span> geolocator.reverse((lat, lon), exactly_one<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        address <span class="op">=</span> location.raw.get(<span class="st">'address'</span>, {})</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        zip_code <span class="op">=</span> address.get(<span class="st">'postcode'</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> zip_code</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> (GeocoderTimedOut, GeocoderServiceError):</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Handle errors or timeouts</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply reverse geocoding to fill missing ZIP codes</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isnull(row[<span class="st">'incident_zip'</span>]) <span class="kw">and</span> pd.notnull(row[<span class="st">'latitude'</span>]) <span class="kw">and</span> pd.notnull(row[<span class="st">'longitude'</span>]):</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        df.at[index, <span class="st">'incident_zip'</span>] <span class="op">=</span> reverse_geocode(row[<span class="st">'latitude'</span>], row[<span class="st">'longitude'</span>])</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: This can be slow for large datasets due to API rate</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="co"># limits and network latency</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-appache-arrow-library" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="using-appache-arrow-library"><span class="header-section-number">5.3</span> Using Appache <code>Arrow</code> Library</h2>
<p>To read and export data efficiently, leveraging the Apache <code>Arrow</code> library can significantly improve performance and storage efficiency, especially with large datasets. The IPC (Inter-Process Communication) file format in the context of Apache Arrow is a key component for efficiently sharing data between different processes, potentially written in different programming languages. Arrow’s IPC mechanism is designed around two main file formats:</p>
<ul>
<li>Stream Format: For sending an arbitrary length sequence of Arrow record batches (tables). The stream format is useful for real-time data exchange where the size of the data is not known upfront and can grow indefinitely.</li>
<li>File (or Feather) Format: Optimized for storage and memory-mapped access, allowing for fast random access to different sections of the data. This format is ideal for scenarios where the entire dataset is available upfront and can be stored in a file system for repeated reads and writes.</li>
</ul>
<p>Apache Arrow provides a columnar memory format for flat and hierarchical data, optimized for efficient data analytics. It can be used in Python through the <code>pyarrow</code> package. Here’s how you can use Arrow to read, manipulate, and export data, including a demonstration of storage savings.</p>
<p>First, ensure you have pyarrow installed on your computer (and preferrably, in your current virtual environment):</p>
<pre><code>pip install pyarrow</code></pre>
<p>Feather is a fast, lightweight, and easy-to-use binary file format for storing data frames, optimized for speed and efficiency, particularly for IPC and data sharing between Python and R.</p>
<div id="f0365580" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df.to_feather(<span class="st">'data/rodent_2022-2023.feather'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Read the feather file back in:</p>
<div id="60c48300" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dff <span class="op">=</span> pd.read_feather(<span class="st">"data/rodent_2022-2023.feather"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>dff.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>(82869, 47)</code></pre>
</div>
</div>
<p>Benefits of Using Feather:</p>
<ul>
<li>Efficiency: Feather is designed to support fast reading and writing of data frames, making it ideal for analytical workflows that need to exchange large datasets between Python and R.</li>
<li>Compatibility: Maintains data type integrity across Python and R, ensuring that numbers, strings, and dates/times are correctly handled and preserved.</li>
<li>Simplicity: The API for reading and writing Feather files is straightforward, making it accessible to users with varying levels of programming expertise.</li>
</ul>
<p>By using Feather format for data storage, you leverage a modern approach optimized for speed and compatibility, significantly enhancing the performance of data-intensive applications.</p>
</section>
<section id="accessing-the-census-data-with-uszipcode" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="accessing-the-census-data-with-uszipcode"><span class="header-section-number">5.4</span> Accessing the Census Data with <code>uszipcode</code></h2>
<p>First, ensure the DataFrame (df) is ready for merging with census data. Specifically, check that the <code>incident_zip</code> column is clean and consistent.</p>
<div id="2eaf3897" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df[<span class="st">'incident_zip'</span>].isnull().<span class="bu">sum</span>())</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize to 5-digit codes, if necessary</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'incident_zip'</span>] <span class="op">=</span> df[<span class="st">'incident_zip'</span>].astype(<span class="bu">str</span>).<span class="bu">str</span>.zfill(<span class="dv">5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0</code></pre>
</div>
</div>
<p>We can use the <code>uszipcode</code> package to get basic demographic data for each zip code. For more detailed or specific census data, using the <code>CensusData</code> package or direct API calls to the Census Bureau’s API.</p>
<p>The <code>uszipcode</code> package provides a range of information about ZIP codes in the United States. When you query a ZIP code using <code>uszipcode</code>, you can access various attributes related to demographic data, housing, geographic location, and more. Here are some of the key variables available at the ZIP code level:</p>
<p><strong>emographic Information</strong></p>
<ul>
<li><code>population</code>: The total population.</li>
<li><code>population_density</code>: The population per square kilometer.</li>
<li><code>housing_units</code>: The total number of housing units.</li>
<li><code>occupied_housing_units</code>: The number of occupied housing units.</li>
<li><code>median_home_value</code>: The median value of homes.</li>
<li><code>median_household_income</code>: The median household income.</li>
<li><code>age_distribution</code>: A breakdown of the population by age.</li>
</ul>
<p><strong>Geographic Information</strong></p>
<ul>
<li><code>zipcode</code>: The ZIP code.</li>
<li><code>zipcode_type</code>: The type of ZIP code (e.g., Standard, PO Box).</li>
<li><code>major_city</code>: The major city associated with the ZIP code.</li>
<li><code>post_office_city</code>: The city name recognized by the U.S. Postal Service.</li>
<li><code>common_city_list</code>: A list of common city names for the ZIP code.</li>
<li><code>county</code>: The county in which the ZIP code is located.</li>
<li><code>state</code>: The state in which the ZIP code is located.</li>
<li><code>lat</code>: The latitude of the approximate center of the ZIP code.</li>
<li><code>lng</code>: The longitude of the approximate center of the ZIP code.</li>
<li><code>timezone</code>: The timezone of the ZIP code.</li>
</ul>
<p><strong>Economic and Housing Data</strong></p>
<ul>
<li><code>land_area_in_sqmi</code>: The land area in square miles.</li>
<li><code>water_area_in_sqmi</code>: The water area in square miles.</li>
<li><code>occupancy_rate</code>: The rate of occupancy for housing units.</li>
<li><code>median_age</code>: The median age of the population.</li>
</ul>
<p>Install the <code>uszipcode</code> package into the current virtual environment by <code>pip install uszipcode</code>.</p>
<p>Now let’s work on the rodent sightings data.</p>
<p>We will first clean the incident_zip column to ensure it only contains valid ZIP codes. Then, we will use a vectorized approach to fetch the required data for each unique ZIP code and merge this information back into the original <code>DataFrame</code>.</p>
<div id="9e52876f" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows where 'incident_zip' is missing or not a valid ZIP code format</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>valid_zip_df <span class="op">=</span> df.dropna(subset<span class="op">=</span>[<span class="st">'incident_zip'</span>]).copy()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>valid_zip_df[<span class="st">'incident_zip'</span>] <span class="op">=</span> valid_zip_df[<span class="st">'incident_zip'</span>].astype(<span class="bu">str</span>).<span class="bu">str</span>.zfill(<span class="dv">5</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>unique_zips <span class="op">=</span> valid_zip_df[<span class="st">'incident_zip'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since <code>uszipcode</code> doesn’t inherently support vectorized operations for multiple ZIP code queries, we’ll optimize the process by querying each unique ZIP code once, then merging the results with the original <code>DataFrame</code>. This approach minimizes redundant queries for ZIP codes that appear multiple times.</p>
<div id="9d805435" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> uszipcode <span class="im">import</span> SearchEngine</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the SearchEngine</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>search <span class="op">=</span> SearchEngine()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch median home value and median household income for each unique ZIP code</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>zip_data <span class="op">=</span> []</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>zip_data <span class="op">=</span> []</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> zip_code <span class="kw">in</span> unique_zips:</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> search.by_zipcode(zip_code)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> result:  <span class="co"># Check if the result is not None</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        zip_data.append({</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"incident_zip"</span>: zip_code,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"median_home_value"</span>: result.median_home_value,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"median_household_income"</span>: result.median_household_income</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:  <span class="co"># Handle the case where the result is None</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        zip_data.append({</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">"incident_zip"</span>: zip_code,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"median_home_value"</span>: <span class="va">None</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"median_household_income"</span>: <span class="va">None</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to DataFrame</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>zip_info_df <span class="op">=</span> pd.DataFrame(zip_data)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge this info back into the original DataFrame based on 'incident_zip'</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>merged_df <span class="op">=</span> pd.merge(valid_zip_df, zip_info_df, how<span class="op">=</span><span class="st">"left"</span>, on<span class="op">=</span><span class="st">"incident_zip"</span>)</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>merged_df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/junyan/work/teaching/ids-s24/ids-s24/.myvenv/lib/python3.12/site-packages/fuzzywuzzy/fuzz.py:11: UserWarning:

Using slow pure-python SequenceMatcher. Install python-Levenshtein to remove this warning
</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>Index(['unique_key', 'created_date', 'closed_date', 'agency', 'agency_name',
       'complaint_type', 'descriptor', 'location_type', 'incident_zip',
       'incident_address', 'street_name', 'cross_street_1', 'cross_street_2',
       'intersection_street_1', 'intersection_street_2', 'address_type',
       'city', 'landmark', 'facility_type', 'status', 'due_date',
       'resolution_description', 'resolution_action_updated_date',
       'community_board', 'bbl', 'borough', 'x_coordinate_(state_plane)',
       'y_coordinate_(state_plane)', 'open_data_channel_type',
       'park_facility_name', 'park_borough', 'vehicle_type',
       'taxi_company_borough', 'taxi_pick_up_location', 'bridge_highway_name',
       'bridge_highway_direction', 'road_ramp', 'bridge_highway_segment',
       'latitude', 'longitude', 'location', 'zip_codes', 'community_districts',
       'borough_boundaries', 'city_council_districts', 'police_precincts',
       'police_precinct', 'median_home_value', 'median_household_income'],
      dtype='object')</code></pre>
</div>
</div>
<!-- # acess ACS data -->
</section>
<section id="accessing-acs-data" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="accessing-acs-data"><span class="header-section-number">5.5</span> Accessing ACS Data</h2>
<p>This section was written by Abigail Mori.</p>
<section id="introduction" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">5.5.1</span> Introduction</h3>
<p>Hi! My name is Abigail Mori and I am a current senior, graduating this May. This past summer I worked with the UConn’s Center for Voting Technology Research. We used ACS data to analyze ease of voting within Connecticut. Though, I only used <code>sql</code> and never had to access this data through <code>python</code>. I am excited to show what I’ve learned over the past couple weeks.</p>
</section>
<section id="installation" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="installation"><span class="header-section-number">5.5.2</span> Installation</h3>
<p>In order to properly access ACS data we will need make sure we have installed <code>cenpy</code> and <code>geodatasets</code>. <code>Cenpy</code> is a package that “automatically discovers US Census Bureau API endpoints and exposes them to Python in a consistent fashion.” <code>Geodatasets</code> “contains an API on top of a JSON with metadata of externally hosted datasets containing geospatial information useful for illustrative and educational purposes.” Both of these modules are dependent on <code>pandas</code>.</p>
</section>
<section id="accessing-acs-data-1" class="level3" data-number="5.5.3">
<h3 data-number="5.5.3" class="anchored" data-anchor-id="accessing-acs-data-1"><span class="header-section-number">5.5.3</span> Accessing ACS Data</h3>
<p>There are many different kinds of census data, one of which is ACS (American Community Survery) data. The ACS data is made up of a “wide range of social, economic, demographic, and housing charateristics.” There are multiple ways to access this data using Python. I will examine one way using <code>cenpy</code>.</p>
<p>For much of work I referenced a <code>cenpy</code> API reference page (https://cenpy-devs.github.io/cenpy/api.html)</p>
<div id="8d3af4cf" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>warnings.simplefilter(action<span class="op">=</span><span class="st">'ignore'</span>, category<span class="op">=</span><span class="pp">FutureWarning</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cenpy <span class="im">as</span> cen</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geodatasets</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b96d09f0" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set a variable to all tables in the The American Community Survey from</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  the Census Bureau</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>acs <span class="op">=</span> cen.products.ACS()</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter through acs tables based on specific variables</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(acs.filter_tables(<span class="st">'RACE'</span>, by<span class="op">=</span><span class="st">'description'</span>))</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Once you select your desired table you can add more specific parameters, </span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># in this case I chose to do so by state</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>connecticut <span class="op">=</span> cen.products.ACS(<span class="dv">2019</span>).from_state(<span class="st">'Connecticut'</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a> variables<span class="op">=</span> <span class="st">'B02001'</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(connecticut.head())</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>nevada <span class="op">=</span> cen.products.ACS(<span class="dv">2019</span>).from_state(<span class="st">'Nevada'</span>, </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>variables<span class="op">=</span> <span class="st">'B02001'</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nevada.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  description  \
table_name                                                      
B02001                                                   RACE   
B02008      WHITE ALONE OR IN COMBINATION WITH ONE OR MORE...   
B02009      BLACK OR AFRICAN AMERICAN ALONE OR IN COMBINAT...   
B02010      AMERICAN INDIAN AND ALASKA NATIVE ALONE OR IN ...   
B02011      ASIAN ALONE OR IN COMBINATION WITH ONE OR MORE...   
B02012      NATIVE HAWAIIAN AND OTHER PACIFIC ISLANDER ALO...   
B02013      SOME OTHER RACE ALONE OR IN COMBINATION WITH O...   
B03002                      HISPANIC OR LATINO ORIGIN BY RACE   
B25006                                    RACE OF HOUSEHOLDER   
B98013      TOTAL POPULATION COVERAGE RATE BY WEIGHTING RA...   
B99021                                     ALLOCATION OF RACE   
C02003                                          DETAILED RACE   

                                                      columns  
table_name                                                     
B02001      [B02001_001E, B02001_002E, B02001_003E, B02001...  
B02008                                          [B02008_001E]  
B02009                                          [B02009_001E]  
B02010                                          [B02010_001E]  
B02011                                          [B02011_001E]  
B02012                                          [B02012_001E]  
B02013                                          [B02013_001E]  
B03002      [B03002_001E, B03002_002E, B03002_003E, B03002...  
B25006      [B25006_001E, B25006_002E, B25006_003E, B25006...  
B98013      [B98013_001E, B98013_002E, B98013_003E, B98013...  
B99021                [B99021_001E, B99021_002E, B99021_003E]  
C02003      [C02003_001E, C02003_002E, C02003_003E, C02003...  
         GEOID                                           geometry  \
0  09001010400  POLYGON ((-8201121.400 5017141.610, -8201100.1...   
1  09001010600  POLYGON ((-8196750.330 5017084.050, -8196748.9...   
2  09001010300  POLYGON ((-8200317.120 5018093.350, -8200295.0...   
3  09001011300  POLYGON ((-8199823.530 5012413.050, -8199813.0...   
4  09001020500  POLYGON ((-8193009.330 5026964.430, -8192869.1...   

   B02001_001E  B02001_002E  B02001_003E  B02001_004E  B02001_005E  \
0       5799.0       4698.0        531.0         17.0        346.0   
1       2062.0       1518.0        282.0          0.0        145.0   
2       3780.0       3305.0        123.0          0.0        247.0   
3       3416.0       2530.0         65.0          8.0        154.0   
4       4886.0       4236.0        232.0        117.0        114.0   

   B02001_006E  B02001_007E  B02001_008E  B02001_009E  B02001_010E  \
0          0.0        143.0         64.0          0.0         64.0   
1         11.0         33.0         73.0          7.0         66.0   
2          0.0         10.0         95.0         16.0         79.0   
3         20.0        408.0        231.0         67.0        164.0   
4         15.0          0.0        172.0          0.0        172.0   

                                              NAME state county   tract  
0  Census Tract 104, Fairfield County, Connecticut    09    001  010400  
1  Census Tract 106, Fairfield County, Connecticut    09    001  010600  
2  Census Tract 103, Fairfield County, Connecticut    09    001  010300  
3  Census Tract 113, Fairfield County, Connecticut    09    001  011300  
4  Census Tract 205, Fairfield County, Connecticut    09    001  020500  
         GEOID                                           geometry  \
0  32031002613  POLYGON ((-13358452.220 4827161.350, -13358451...   
1  32031003308  POLYGON ((-13359059.470 4760834.720, -13357433...   
2  32031980200  POLYGON ((-13358521.900 4802740.580, -13358516...   
3  32031002407  POLYGON ((-13346382.740 4800296.200, -13346335...   
4  32031001105  POLYGON ((-13343276.140 4791951.280, -13343275...   

   B02001_001E  B02001_002E  B02001_003E  B02001_004E  B02001_005E  \
0       5830.0       5387.0        140.0         35.0         74.0   
1       2155.0       1976.0          0.0         35.0         74.0   
2          0.0          0.0          0.0          0.0          0.0   
3       4151.0       3025.0         87.0        114.0        671.0   
4       3819.0       3434.0         67.0          0.0        233.0   

   B02001_006E  B02001_007E  B02001_008E  B02001_009E  B02001_010E  \
0         25.0         61.0        108.0          0.0        108.0   
1          9.0          4.0         57.0         12.0         45.0   
2          0.0          0.0          0.0          0.0          0.0   
3         29.0         77.0        148.0         55.0         93.0   
4         14.0         16.0         55.0          0.0         55.0   

                                        NAME state county   tract  
0  Census Tract 26.13, Washoe County, Nevada    32    031  002613  
1  Census Tract 33.08, Washoe County, Nevada    32    031  003308  
2   Census Tract 9802, Washoe County, Nevada    32    031  980200  
3  Census Tract 24.07, Washoe County, Nevada    32    031  002407  
4  Census Tract 11.05, Washoe County, Nevada    32    031  001105  </code></pre>
</div>
</div>
<p>Each columns meanings can be found here: https://api.census.gov/data/2019/acs/acs1/variables.html and https://www.census.gov/programs-surveys/acs/technical-documentation /table-shells.2019.html#list-tab-79594641</p>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 81%">
</colgroup>
<tbody>
<tr class="odd">
<td>B02001_001E:</td>
<td>Total</td>
</tr>
<tr class="even">
<td>B02001_002E</td>
<td>White alone</td>
</tr>
<tr class="odd">
<td>B02001_003E</td>
<td>Black or African American alone</td>
</tr>
<tr class="even">
<td>B02001_004E</td>
<td>American Indian and Alaska Native alone</td>
</tr>
<tr class="odd">
<td>B02001_005E</td>
<td>Asian alone</td>
</tr>
<tr class="even">
<td>B02001_006E</td>
<td>Native Hawaiian and Other Pacific Islander alone</td>
</tr>
<tr class="odd">
<td>B02001_007E</td>
<td>Some other race alone</td>
</tr>
<tr class="even">
<td>B02001_008E</td>
<td>Two or more races</td>
</tr>
<tr class="odd">
<td>B02001_009E</td>
<td>Two races including Some other race</td>
</tr>
<tr class="even">
<td>B02001_010E</td>
<td>Two races excluding Some other race, and three or more races</td>
</tr>
</tbody>
</table>
</section>
<section id="visualizing" class="level3" data-number="5.5.4">
<h3 data-number="5.5.4" class="anchored" data-anchor-id="visualizing"><span class="header-section-number">5.5.4</span> Visualizing</h3>
<p><code>Cenpy</code> returns users with datasets based on specifications, like RACE. Some of the columns include: geiod, geometry, name, state, county, and tract. The geometry is made up of Polygons which then can be used to make a map with <code>matplotlib</code> Since, <code>cenpy</code> provides a table of type: geopandas.geodataframe.GeoDataFrame. <code>GeoPandas</code> provides a high-level interface to the <code>matplotlib</code> library for making maps.</p>
<p>Below, I show maps of Connecticut and Nevada which display the populations of Native Hawaiians and other Pacific Islanders by census tract.</p>
<div id="b2ed5199" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="9907d4b4" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1,ax2) <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">2</span>, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">16</span>))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#B02001_006E: total number of Native Hawaiians and other Pacific Islanders</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> connecticut.plot(<span class="st">'B02001_006E'</span>, ax <span class="op">=</span> ax1, cmap <span class="op">=</span> <span class="st">'viridis'</span>, legend <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> nevada.plot(<span class="st">'B02001_006E'</span>, ax <span class="op">=</span> ax2, cmap <span class="op">=</span> <span class="st">'viridis'</span>, legend <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="import_files/figure-html/cell-14-output-1.png" width="1539" height="1210" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="further-analysis" class="level3" data-number="5.5.5">
<h3 data-number="5.5.5" class="anchored" data-anchor-id="further-analysis"><span class="header-section-number">5.5.5</span> Further Analysis</h3>
<p>ACS data can allow individuals to see discrepancies in voting accessability. For instance, we can look at correlation between a poverty level and education in a specific state.</p>
<p>We can access this data doing the same search method as above.</p>
<p>Like before we filter through the tables to access our desired data. In this instance I chose to select data concerning poverty and education in Connecticut.</p>
<div id="657ae247" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(acs.filter_tables(<span class="st">'POVERTY'</span>, by<span class="op">=</span><span class="st">'description'</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># B17001: Poverty status in the past 12 months </span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>poverty_ct <span class="op">=</span> cen.products.ACS(<span class="dv">2019</span>).from_state(<span class="st">'Connecticut'</span>, </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>variables <span class="op">=</span> <span class="st">'B17001'</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>poverty_ct.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  description  \
table_name                                                      
B05010      RATIO OF INCOME TO POVERTY LEVEL IN THE PAST 1...   
B06012      PLACE OF BIRTH BY POVERTY STATUS IN THE PAST 1...   
B07012      GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY POVE...   
B07412      GEOGRAPHICAL MOBILITY IN THE PAST YEAR BY POVE...   
B08122      MEANS OF TRANSPORTATION TO WORK BY POVERTY STA...   
B08522      MEANS OF TRANSPORTATION TO WORK BY POVERTY STA...   
B10059      POVERTY STATUS IN THE PAST 12 MONTHS OF GRANDP...   
B13010      WOMEN 15 TO 50 YEARS WHO HAD A BIRTH IN THE PA...   
B14006      POVERTY STATUS IN THE PAST 12 MONTHS BY SCHOOL...   
B16009      POVERTY STATUS IN THE PAST 12 MONTHS BY AGE BY...   
B17001      POVERTY STATUS IN THE PAST 12 MONTHS BY SEX BY...   
B17003      POVERTY STATUS IN THE PAST 12 MONTHS OF INDIVI...   
B17004      POVERTY STATUS IN THE PAST 12 MONTHS OF INDIVI...   
B17005      POVERTY STATUS IN THE PAST 12 MONTHS OF INDIVI...   
B17006      POVERTY STATUS IN THE PAST 12 MONTHS OF RELATE...   
B17007      POVERTY STATUS IN THE PAST 12 MONTHS OF UNRELA...   
B17009      POVERTY STATUS BY WORK EXPERIENCE OF UNRELATED...   
B17010      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17012      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17013      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17014      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17015      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17016      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17017      POVERTY STATUS IN THE PAST 12 MONTHS BY HOUSEH...   
B17018      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17019      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17020            POVERTY STATUS IN THE PAST 12 MONTHS BY AGE   
B17021      POVERTY STATUS OF INDIVIDUALS IN THE PAST 12 M...   
B17022      RATIO OF INCOME TO POVERTY LEVEL IN THE PAST 1...   
B17023      POVERTY STATUS IN THE PAST 12 MONTHS OF FAMILI...   
B17024      AGE BY RATIO OF INCOME TO POVERTY LEVEL IN THE...   
B17025       POVERTY STATUS IN THE PAST 12 MONTHS BY NATIVITY   
B17026      RATIO OF INCOME TO POVERTY LEVEL OF FAMILIES I...   
B22003      RECEIPT OF FOOD STAMPS/SNAP IN THE PAST 12 MON...   
B23024      POVERTY STATUS IN THE PAST 12 MONTHS BY DISABI...   
B29003       CITIZEN, VOTING-AGE POPULATION BY POVERTY STATUS   
B99171      ALLOCATION OF POVERTY STATUS IN THE PAST 12 MO...   
B99172      ALLOCATION OF POVERTY STATUS IN THE PAST 12 MO...   
C17002      RATIO OF INCOME TO POVERTY LEVEL IN THE PAST 1...   
C18130             AGE BY DISABILITY STATUS BY POVERTY STATUS   
C18131      RATIO OF INCOME TO POVERTY LEVEL IN THE PAST 1...   
C21007      AGE BY VETERAN STATUS BY POVERTY STATUS IN THE...   
C27016      HEALTH INSURANCE COVERAGE STATUS BY RATIO OF I...   
C27017      PRIVATE HEALTH INSURANCE BY RATIO OF INCOME TO...   
C27018      PUBLIC HEALTH INSURANCE BY RATIO OF INCOME TO ...   

                                                      columns  
table_name                                                     
B05010      [B05010_001E, B05010_002E, B05010_003E, B05010...  
B06012      [B06012_001E, B06012_002E, B06012_003E, B06012...  
B07012      [B07012_001E, B07012_002E, B07012_003E, B07012...  
B07412      [B07412_001E, B07412_002E, B07412_003E, B07412...  
B08122      [B08122_001E, B08122_002E, B08122_003E, B08122...  
B08522      [B08522_001E, B08522_002E, B08522_003E, B08522...  
B10059      [B10059_001E, B10059_002E, B10059_003E, B10059...  
B13010      [B13010_001E, B13010_002E, B13010_003E, B13010...  
B14006      [B14006_001E, B14006_002E, B14006_003E, B14006...  
B16009      [B16009_001E, B16009_002E, B16009_003E, B16009...  
B17001      [B17001_001E, B17001_002E, B17001_003E, B17001...  
B17003      [B17003_001E, B17003_002E, B17003_003E, B17003...  
B17004      [B17004_001E, B17004_002E, B17004_003E, B17004...  
B17005      [B17005_001E, B17005_002E, B17005_003E, B17005...  
B17006      [B17006_001E, B17006_002E, B17006_003E, B17006...  
B17007      [B17007_001E, B17007_002E, B17007_003E, B17007...  
B17009      [B17009_001E, B17009_002E, B17009_003E, B17009...  
B17010      [B17010_001E, B17010_002E, B17010_003E, B17010...  
B17012      [B17012_001E, B17012_002E, B17012_003E, B17012...  
B17013      [B17013_001E, B17013_002E, B17013_003E, B17013...  
B17014      [B17014_001E, B17014_002E, B17014_003E, B17014...  
B17015      [B17015_001E, B17015_002E, B17015_003E, B17015...  
B17016      [B17016_001E, B17016_002E, B17016_003E, B17016...  
B17017      [B17017_001E, B17017_002E, B17017_003E, B17017...  
B17018      [B17018_001E, B17018_002E, B17018_003E, B17018...  
B17019      [B17019_001E, B17019_002E, B17019_003E, B17019...  
B17020      [B17020_001E, B17020_002E, B17020_003E, B17020...  
B17021      [B17021_001E, B17021_002E, B17021_003E, B17021...  
B17022      [B17022_001E, B17022_002E, B17022_003E, B17022...  
B17023      [B17023_001E, B17023_002E, B17023_003E, B17023...  
B17024      [B17024_001E, B17024_002E, B17024_003E, B17024...  
B17025      [B17025_001E, B17025_002E, B17025_003E, B17025...  
B17026      [B17026_001E, B17026_002E, B17026_003E, B17026...  
B22003      [B22003_001E, B22003_002E, B22003_003E, B22003...  
B23024      [B23024_001E, B23024_002E, B23024_003E, B23024...  
B29003                [B29003_001E, B29003_002E, B29003_003E]  
B99171      [B99171_001E, B99171_002E, B99171_003E, B99171...  
B99172      [B99172_001E, B99172_002E, B99172_003E, B99172...  
C17002      [C17002_001E, C17002_002E, C17002_003E, C17002...  
C18130      [C18130_001E, C18130_002E, C18130_003E, C18130...  
C18131      [C18131_001E, C18131_002E, C18131_003E, C18131...  
C21007      [C21007_001E, C21007_002E, C21007_003E, C21007...  
C27016      [C27016_001E, C27016_002E, C27016_003E, C27016...  
C27017      [C27017_001E, C27017_002E, C27017_003E, C27017...  
C27018      [C27018_001E, C27018_002E, C27018_003E, C27018...  </code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">B17001A_001E</th>
<th data-quarto-table-cell-role="th">B17001A_002E</th>
<th data-quarto-table-cell-role="th">B17001A_003E</th>
<th data-quarto-table-cell-role="th">B17001A_004E</th>
<th data-quarto-table-cell-role="th">B17001A_005E</th>
<th data-quarto-table-cell-role="th">B17001A_006E</th>
<th data-quarto-table-cell-role="th">B17001A_007E</th>
<th data-quarto-table-cell-role="th">B17001A_008E</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">B17001_051E</th>
<th data-quarto-table-cell-role="th">B17001_052E</th>
<th data-quarto-table-cell-role="th">B17001_053E</th>
<th data-quarto-table-cell-role="th">B17001_054E</th>
<th data-quarto-table-cell-role="th">B17001_055E</th>
<th data-quarto-table-cell-role="th">B17001_056E</th>
<th data-quarto-table-cell-role="th">B17001_057E</th>
<th data-quarto-table-cell-role="th">B17001_058E</th>
<th data-quarto-table-cell-role="th">B17001_059E</th>
<th data-quarto-table-cell-role="th">NAME</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>09001010400</td>
<td>POLYGON ((-8201121.400 5017141.610, -8201100.1...</td>
<td>4698.0</td>
<td>399.0</td>
<td>232.0</td>
<td>0.0</td>
<td>0.0</td>
<td>17.0</td>
<td>0.0</td>
<td>15.0</td>
<td>...</td>
<td>0.0</td>
<td>88.0</td>
<td>252.0</td>
<td>511.0</td>
<td>282.0</td>
<td>443.0</td>
<td>358.0</td>
<td>343.0</td>
<td>273.0</td>
<td>Census Tract 104, Fairfield County, Connecticut</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>09001010600</td>
<td>POLYGON ((-8196750.330 5017084.050, -8196748.9...</td>
<td>1513.0</td>
<td>151.0</td>
<td>62.0</td>
<td>10.0</td>
<td>10.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>36.0</td>
<td>135.0</td>
<td>130.0</td>
<td>171.0</td>
<td>147.0</td>
<td>172.0</td>
<td>118.0</td>
<td>Census Tract 106, Fairfield County, Connecticut</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>09001010300</td>
<td>POLYGON ((-8200317.120 5018093.350, -8200295.0...</td>
<td>3300.0</td>
<td>152.0</td>
<td>62.0</td>
<td>0.0</td>
<td>0.0</td>
<td>21.0</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>0.0</td>
<td>11.0</td>
<td>108.0</td>
<td>91.0</td>
<td>254.0</td>
<td>246.0</td>
<td>367.0</td>
<td>167.0</td>
<td>185.0</td>
<td>Census Tract 103, Fairfield County, Connecticut</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>09001011300</td>
<td>POLYGON ((-8199823.530 5012413.050, -8199813.0...</td>
<td>2530.0</td>
<td>262.0</td>
<td>139.0</td>
<td>0.0</td>
<td>15.0</td>
<td>41.0</td>
<td>28.0</td>
<td>0.0</td>
<td>...</td>
<td>8.0</td>
<td>27.0</td>
<td>91.0</td>
<td>346.0</td>
<td>202.0</td>
<td>261.0</td>
<td>226.0</td>
<td>56.0</td>
<td>100.0</td>
<td>Census Tract 113, Fairfield County, Connecticut</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>09001020500</td>
<td>POLYGON ((-8193009.330 5026964.430, -8192869.1...</td>
<td>4094.0</td>
<td>81.0</td>
<td>48.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>45.0</td>
<td>22.0</td>
<td>186.0</td>
<td>110.0</td>
<td>267.0</td>
<td>318.0</td>
<td>364.0</td>
<td>229.0</td>
<td>376.0</td>
<td>Census Tract 205, Fairfield County, Connecticut</td>
</tr>
</tbody>
</table>

<p>5 rows × 596 columns</p>
</div>
</div>
</div>
</div>
<div id="1030e7f5" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(acs.filter_tables(<span class="st">'HOUSING'</span>, by <span class="op">=</span> <span class="st">'description'</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Total Population in occupied housing</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>housing_ct <span class="op">=</span> cen.products.ACS(<span class="dv">2019</span>).from_state(<span class="st">'Connecticut'</span>, </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>variables <span class="op">=</span> <span class="st">'B25008'</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>housing_ct.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  description  \
table_name                                                      
B25001                                          HOUSING UNITS   
B25008      TOTAL POPULATION IN OCCUPIED HOUSING UNITS BY ...   
B25010      AVERAGE HOUSEHOLD SIZE OF OCCUPIED HOUSING UNI...   
B25026      TOTAL POPULATION IN OCCUPIED HOUSING UNITS BY ...   
B25033      TOTAL POPULATION IN OCCUPIED HOUSING UNITS BY ...   
B25047              PLUMBING FACILITIES FOR ALL HOUSING UNITS   
B25048         PLUMBING FACILITIES FOR OCCUPIED HOUSING UNITS   
B25051               KITCHEN FACILITIES FOR ALL HOUSING UNITS   
B25052          KITCHEN FACILITIES FOR OCCUPIED HOUSING UNITS   
B25101      MORTGAGE STATUS BY MONTHLY HOUSING COSTS AS A ...   
B25104                                  MONTHLY HOUSING COSTS   
B25105                 MEDIAN MONTHLY HOUSING COSTS (DOLLARS)   
B25106      TENURE BY HOUSING COSTS AS A PERCENTAGE OF HOU...   
B98001                         UNWEIGHTED HOUSING UNIT SAMPLE   
B98011                             HOUSING UNIT COVERAGE RATE   
B98021      HOUSING UNIT RESPONSE AND NONRESPONSE RATES WI...   
B98032      OVERALL HOUSING UNIT CHARACTERISTIC ALLOCATION...   
B992523     ALLOCATION OF SELECTED MONTHLY OWNER COSTS FOR...   

                                                      columns  
table_name                                                     
B25001                                          [B25001_001E]  
B25008                [B25008_001E, B25008_002E, B25008_003E]  
B25010                [B25010_001E, B25010_002E, B25010_003E]  
B25026      [B25026_001E, B25026_002E, B25026_003E, B25026...  
B25033      [B25033_001E, B25033_002E, B25033_003E, B25033...  
B25047                [B25047_001E, B25047_002E, B25047_003E]  
B25048                [B25048_001E, B25048_002E, B25048_003E]  
B25051                [B25051_001E, B25051_002E, B25051_003E]  
B25052                [B25052_001E, B25052_002E, B25052_003E]  
B25101      [B25101_001E, B25101_002E, B25101_003E, B25101...  
B25104      [B25104_001E, B25104_002E, B25104_003E, B25104...  
B25105                                          [B25105_001E]  
B25106      [B25106_001E, B25106_002E, B25106_003E, B25106...  
B98001                             [B98001_001E, B98001_002E]  
B98011                                          [B98011_001E]  
B98021      [B98021_001E, B98021_002E, B98021_003E, B98021...  
B98032                                          [B98032_001E]  
B992523            [B992523_001E, B992523_002E, B992523_003E]  </code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">B25008_001E</th>
<th data-quarto-table-cell-role="th">B25008_002E</th>
<th data-quarto-table-cell-role="th">B25008_003E</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">county</th>
<th data-quarto-table-cell-role="th">tract</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>09001010400</td>
<td>POLYGON ((-8201121.400 5017141.610, -8201100.1...</td>
<td>5777.0</td>
<td>3647.0</td>
<td>2130.0</td>
<td>Census Tract 104, Fairfield County, Connecticut</td>
<td>09</td>
<td>001</td>
<td>010400</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>09001010600</td>
<td>POLYGON ((-8196750.330 5017084.050, -8196748.9...</td>
<td>2052.0</td>
<td>858.0</td>
<td>1194.0</td>
<td>Census Tract 106, Fairfield County, Connecticut</td>
<td>09</td>
<td>001</td>
<td>010600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>09001010300</td>
<td>POLYGON ((-8200317.120 5018093.350, -8200295.0...</td>
<td>3717.0</td>
<td>2791.0</td>
<td>926.0</td>
<td>Census Tract 103, Fairfield County, Connecticut</td>
<td>09</td>
<td>001</td>
<td>010300</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>09001011300</td>
<td>POLYGON ((-8199823.530 5012413.050, -8199813.0...</td>
<td>3411.0</td>
<td>1500.0</td>
<td>1911.0</td>
<td>Census Tract 113, Fairfield County, Connecticut</td>
<td>09</td>
<td>001</td>
<td>011300</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>09001020500</td>
<td>POLYGON ((-8193009.330 5026964.430, -8192869.1...</td>
<td>4746.0</td>
<td>4470.0</td>
<td>276.0</td>
<td>Census Tract 205, Fairfield County, Connecticut</td>
<td>09</td>
<td>001</td>
<td>020500</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div id="cc62540a" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1,ax2) <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">1</span>, ncols<span class="op">=</span><span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">16</span>))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> poverty_ct.plot(<span class="st">'B17001A_001E'</span>, ax <span class="op">=</span> ax1, cmap <span class="op">=</span> <span class="st">'viridis'</span>, legend <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> housing_ct.plot(<span class="st">'B25008_001E'</span>, ax <span class="op">=</span> ax2, cmap <span class="op">=</span> <span class="st">'viridis'</span>, legend <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="import_files/figure-html/cell-17-output-1.png" width="1547" height="1210" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Based on this we can visualize the numbers of individuals who are in poverty and individuals who have housing by census tract.</p>
<p>A further step is to run statistical analysis to see if there is any dependence and correlation between poverty and housing attainment within Connecituct.</p>
</section>
<section id="references" class="level3" data-number="5.5.6">
<h3 data-number="5.5.6" class="anchored" data-anchor-id="references"><span class="header-section-number">5.5.6</span> References</h3>
<p>https://cenpy-devs.github.io/cenpy/api.html https://pypi.org/project/CensusData/ https://pypi.org/project/cenpy/0.9.1/ https://geopandas.org/en/stable/getting_started/introduction.html https://data.census.gov/table/ACSDT1Y2022.B02001?t=Race+and+Ethnicity https://www.census.gov/programs-surveys/acs/technical-documentation/table-shells.2019.html#list-tab-79594641</p>
<!-- # Database Operations with SQL -->
</section>
</section>
<section id="database-operations-with-sql" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="database-operations-with-sql"><span class="header-section-number">5.6</span> Database Operations with SQL</h2>
<section id="introduction-1" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="introduction-1"><span class="header-section-number">5.6.1</span> Introduction</h3>
<p>Today, I will be presenting on Database Operations using SQL and I will demonstrate it by using sqlite3 in Python and I will use our cleaned rodent data set. This presentation will briefly go over what Professor Haim Bar talked about during his talk and we will dive into some more advanced SQL commands.</p>
</section>
<section id="what-is-sql" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="what-is-sql"><span class="header-section-number">5.6.2</span> What is SQL?</h3>
<p>Structured Query Language (SQL) is a standard language for accessing and manipulating databases. It is used within relational database management systems such as MS SQL Server, MySQL, Oracle, etc… to perform CRUD operations.</p>
<section id="crud" class="level4" data-number="5.6.2.1">
<h4 data-number="5.6.2.1" class="anchored" data-anchor-id="crud"><span class="header-section-number">5.6.2.1</span> CRUD</h4>
<ul>
<li><u>C</u>reate - inserting new records/values</li>
</ul>
<p><strong>INSERT INTO</strong> table_name <strong>VALUES</strong> (field value 1, field value 2, …)</p>
<ul>
<li><u>R</u>ead - searching for records</li>
</ul>
<p><strong>SELECT</strong> field 1, field2, … <strong>FROM</strong> table_name [<strong>WHERE</strong> condition]</p>
<ul>
<li><u>U</u>pdate - modifying existing records</li>
</ul>
<p><strong>UPDATE</strong> table_name <strong>SET</strong> field1=value1, field2=value2, … [<strong>WHERE</strong> condition]</p>
<ul>
<li><u>D</u>elete - removing existing records</li>
</ul>
<p><strong>DELETE</strong> <strong>FROM</strong> table_name [<strong>WHERE</strong> condition]</p>
</section>
<section id="rdbms-vs-nosql" class="level4" data-number="5.6.2.2">
<h4 data-number="5.6.2.2" class="anchored" data-anchor-id="rdbms-vs-nosql"><span class="header-section-number">5.6.2.2</span> RDBMS vs NoSQL</h4>
<p>RDBMS</p>
<ul>
<li>Basis for SQL</li>
<li>Models relationships in “Tables”</li>
<li>Rows and Columns (Record/Fields)</li>
<li>MS Access, SQL Server, MySQL</li>
<li>Two tables can be linked if they have a matching field</li>
</ul>
<p>NoSQL</p>
<ul>
<li>“Not only” SQL or Non-SQL</li>
<li>Great with large data sets</li>
<li>Key / Value Pairs</li>
<li>Does not always use SQL</li>
<li>AWS DynamoDB</li>
</ul>
</section>
</section>
<section id="recap-and-overview-of-some-basics" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="recap-and-overview-of-some-basics"><span class="header-section-number">5.6.3</span> Recap and Overview of some Basics</h3>
<blockquote class="blockquote">
<p>Key Notes from Professor Bar</p>
</blockquote>
<section id="creating-tables" class="level4" data-number="5.6.3.1">
<h4 data-number="5.6.3.1" class="anchored" data-anchor-id="creating-tables"><span class="header-section-number">5.6.3.1</span> Creating Tables</h4>
<pre><code>CREATE TABLE contacts(
    contact_id INTEGER PRIMARY KEY,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    email TEXT NOT NULL UNIQUE,
    phone TEXT NOT NULL UNIQUE
);</code></pre>
<ul>
<li>Creates a table named <em>contacts</em>.</li>
<li>Five fields: contact_id, first_name, last_name, email, phone</li>
<li>PRIMARY KEY: uniquely identifies each record in the table.</li>
<li>Some columns will store character data while others will store integer data.</li>
<li>NOT NULL: Columns <strong>cannot</strong> be empty.</li>
<li>UNIQUE: All values in this specific column have to be different from each other.</li>
</ul>
<pre><code>CREATE TABLE contact_groups (
    contact_id INTEGER PRIMARY KEY,
    group_id INTEGER PRIMARY KEY,
    PRIMARY KEY(contact_id, group_id)
    FOREIGN KEY(contact_id)
        REFERENCES contacts (contact_id)
            ON DELETE CASCADE
            ON UPDATE NO ACTION,
    FOREIGN KEY(group_id)
        REFERENCES groups (group_Id)
            ON DELETE CASCADE
            ON UPDATE NO ACTION
);</code></pre>
<ul>
<li>PRIMARY KEY() declares which variables are primary keys. We should remove the first two <em>Primary Key</em> declarations to have proper syntax.</li>
<li>FOREIGN KEY() declares the variable as a foreign key
<ul>
<li>A constraint that is used to prevent actions that would destroy links between tables.</li>
<li>A field in one table that refers to a different <code>PRIMARY KEY</code> in another table.</li>
<li>Table with a foreign key is a child table.</li>
<li>Prevents invalid data from being inserted into the foreign key column because it has to be a value contained in the parent table.</li>
</ul></li>
<li>ON DELETE CASECADE: If a record in <code>contacts</code> is deleted, any corresponding records in <code>contact_groups</code> will also be deleted.</li>
<li>ON UPDATE NO ACTION: If a <code>contact_id</code> in <code>contacts</code> is updated, no action will be taken on <code>contact_groups</code>.
<ul>
<li>Can be replaced with <code>RESTRICT</code>.</li>
</ul></li>
</ul>
</section>
<section id="inserting-and-searching" class="level4" data-number="5.6.3.2">
<h4 data-number="5.6.3.2" class="anchored" data-anchor-id="inserting-and-searching"><span class="header-section-number">5.6.3.2</span> Inserting and Searching</h4>
<ul>
<li>Multiple ways to insert values into a specific table.</li>
</ul>
<pre><code>INSERT INTO artists (name) VALUES('Bud Powell')
INSERT INTO artists (name)
VALUES
    ('Buddy Rich')
    ('Example 2')</code></pre>
<ul>
<li>Updating multiple or all rows.</li>
</ul>
<pre><code>SELECT employeeid, firstname, lastname, title, email FROM employees;
UPDATE employees SET lastname = 'smith' WHERE employeeid = 3;

# Multiple
UPDATE employees SET city = 'Toronto', state='ON', 
postalcode= 'M5p2n7' WHERE employeeid=4;

# All
UPDATE employees SET email = LOWER(firstname || "." || lastname || '@gmail.com';</code></pre>
</section>
<section id="deleting" class="level4" data-number="5.6.3.3">
<h4 data-number="5.6.3.3" class="anchored" data-anchor-id="deleting"><span class="header-section-number">5.6.3.3</span> Deleting</h4>
<ul>
<li>Deleting Tables/Databases</li>
</ul>
<pre><code>DROP TABLE addresses;
DROP DATABASE databasename;</code></pre>
<p><strong>Note: Dropping a database will result in loss of information.</strong></p>
<ul>
<li>Deleting entries given a condition</li>
</ul>
<pre><code>DELETE FROM table_name WHERE condition;</code></pre>
</section>
</section>
<section id="utilizing-sqlite3-in-python-with-rodent-data-set" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="utilizing-sqlite3-in-python-with-rodent-data-set"><span class="header-section-number">5.6.4</span> Utilizing sqlite3 in Python with Rodent Data Set</h3>
<p><strong>Connecting to SQLite3 Using Python</strong></p>
<div id="f4478d68" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Connects to Database</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>conn <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">"presentation.db"</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Using our cleaned rodent data</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_feather(<span class="st">"data/rodent_2022-2023.feather"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="40939586" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates Rodent table</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>data.to_sql(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">'rodent'</span>, <span class="co"># Name of SQL table</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>            conn, <span class="co"># sqlite3 connection</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>            if_exists <span class="op">=</span> <span class="st">'replace'</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>            index <span class="op">=</span> <span class="va">False</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Cursor, Instance that allows you to invoke methods to execute SQL statements.</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>cursor <span class="op">=</span> conn.cursor()</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Executing example statement to show functionality</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>cursor.execute(<span class="st">"""</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="st">                SELECT *</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="st">                FROM rodent</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="st">                LIMIT 5</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="st">               """</span>)</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> cursor.fetchall()</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Column names</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [description[<span class="dv">0</span>] <span class="cf">for</span> description <span class="kw">in</span> cursor.description]</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the output in a table format</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(rows, columns<span class="op">=</span>columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">unique_key</th>
<th data-quarto-table-cell-role="th">created_date</th>
<th data-quarto-table-cell-role="th">closed_date</th>
<th data-quarto-table-cell-role="th">agency</th>
<th data-quarto-table-cell-role="th">agency_name</th>
<th data-quarto-table-cell-role="th">complaint_type</th>
<th data-quarto-table-cell-role="th">descriptor</th>
<th data-quarto-table-cell-role="th">location_type</th>
<th data-quarto-table-cell-role="th">incident_zip</th>
<th data-quarto-table-cell-role="th">incident_address</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">bridge_highway_segment</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">location</th>
<th data-quarto-table-cell-role="th">zip_codes</th>
<th data-quarto-table-cell-role="th">community_districts</th>
<th data-quarto-table-cell-role="th">borough_boundaries</th>
<th data-quarto-table-cell-role="th">city_council_districts</th>
<th data-quarto-table-cell-role="th">police_precincts</th>
<th data-quarto-table-cell-role="th">police_precinct</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>59893776</td>
<td>2023-12-31 23:05:41</td>
<td>2023-12-31 23:05:41</td>
<td>DOHMH</td>
<td>Department of Health and Mental Hygiene</td>
<td>Rodent</td>
<td>Rat Sighting</td>
<td>3+ Family Apt. Building</td>
<td>11216</td>
<td>265 PUTNAM AVENUE</td>
<td>...</td>
<td>None</td>
<td>40.683857</td>
<td>-73.951645</td>
<td>(40.683855196486164, -73.95164557951071)</td>
<td>17618.0</td>
<td>69.0</td>
<td>2.0</td>
<td>49.0</td>
<td>51.0</td>
<td>51.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>59887523</td>
<td>2023-12-31 22:19:22</td>
<td>2024-01-03 08:47:02</td>
<td>DOHMH</td>
<td>Department of Health and Mental Hygiene</td>
<td>Rodent</td>
<td>Rat Sighting</td>
<td>Commercial Building</td>
<td>10028</td>
<td>1538 THIRD AVENUE</td>
<td>...</td>
<td>None</td>
<td>40.779243</td>
<td>-73.953690</td>
<td>(40.77924175816874, -73.95368859796383)</td>
<td>10099.0</td>
<td>23.0</td>
<td>4.0</td>
<td>1.0</td>
<td>11.0</td>
<td>11.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>59891998</td>
<td>2023-12-31 22:03:12</td>
<td>2023-12-31 22:03:12</td>
<td>DOHMH</td>
<td>Department of Health and Mental Hygiene</td>
<td>Rodent</td>
<td>Rat Sighting</td>
<td>3+ Family Apt. Building</td>
<td>10458</td>
<td>2489 TIEBOUT AVENUE</td>
<td>...</td>
<td>None</td>
<td>40.861694</td>
<td>-73.894989</td>
<td>(40.861693023118924, -73.89499228560491)</td>
<td>10936.0</td>
<td>6.0</td>
<td>5.0</td>
<td>22.0</td>
<td>29.0</td>
<td>29.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>59887520</td>
<td>2023-12-31 21:13:02</td>
<td>2024-01-03 09:33:43</td>
<td>DOHMH</td>
<td>Department of Health and Mental Hygiene</td>
<td>Rodent</td>
<td>Mouse Sighting</td>
<td>3+ Family Apt. Building</td>
<td>11206</td>
<td>116 JEFFERSON STREET</td>
<td>...</td>
<td>None</td>
<td>40.699741</td>
<td>-73.930733</td>
<td>(40.69974221739347, -73.93073474327662)</td>
<td>17213.0</td>
<td>42.0</td>
<td>2.0</td>
<td>30.0</td>
<td>53.0</td>
<td>53.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>59889297</td>
<td>2023-12-31 20:50:10</td>
<td>None</td>
<td>DOHMH</td>
<td>Department of Health and Mental Hygiene</td>
<td>Rodent</td>
<td>Rat Sighting</td>
<td>1-2 Family Dwelling</td>
<td>11206</td>
<td>114 ELLERY STREET</td>
<td>...</td>
<td>None</td>
<td>40.698444</td>
<td>-73.948578</td>
<td>(40.69844506428295, -73.94858040356128)</td>
<td>17213.0</td>
<td>69.0</td>
<td>2.0</td>
<td>49.0</td>
<td>51.0</td>
<td>51.0</td>
</tr>
</tbody>
</table>

<p>5 rows × 47 columns</p>
</div>
</div>
</div>
</div>
</section>
<section id="references-1" class="level3" data-number="5.6.5">
<h3 data-number="5.6.5" class="anchored" data-anchor-id="references-1"><span class="header-section-number">5.6.5</span> References</h3>
<ul>
<li>https://www.w3schools.com/sql/</li>
<li>https://aws.amazon.com/what-is/sql/</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./python.html" class="pagination-link" aria-label="Python Refreshment">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Python Refreshment</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./communication.html" class="pagination-link" aria-label="Communication and Ethics">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Communication and Ethics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>